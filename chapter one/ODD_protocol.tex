\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[margin=2.6cm]{geometry}
\usepackage{float}
\usepackage{rotating}
\usepackage{caption}
\usepackage[round]{natbib}
\usepackage{setspace}
\onehalfspacing

\title{The interplay of resource acquisition and sharing dynamics explains the diversity of female human reproductive allocative decisions.
\\
ODD protocol}
\author{Pablo J. Varas Enriquez}
\date{\today}

\begin{document}

\maketitle

\tableofcontents

\section{Overview}

\subsection{Purpose}

The female human life cycle is characterised by a long lifespan, within which there is usually a short reproductive period in between long juvenile and post-reproductive stages. The boundaries of the reproductive period, and the frequency at which births occur during this period, are influenced by individual reproductive allocative decisions. Previous work has linked reproductive allocative decisions to the amount of resources available to an individual in its environment or the availability of a network of potential helpers, but how the interplay of both of them change reproductive allocative decisions of an individual remains unclear. Here I develop a theoretical framework to describe how the interplay of resource acquisition and their sharing across the social network may be key to understand female reproductive decisions. More specifically, it allows to analyse fitness differentials by simulating different scenarios in which the female human life cycle might vary. \emph{Comment DL: why a agent-based simulation and not a sequence of equations: e.g. infant starts with 1 resource - probability to survive 0.85 * resources 1 - probability to receive 0.9 * 1 - 1.9 resources -> probability to consume 1 * 0.75 - 1.15 resources -> probability to store 0.95 * remaining - 1.0925 -> probability to loose 0.05 * remaining -> 1.038 resources on average at the end; if transition occurs at 1.2 resources means it takes 5.2 years to transition to juvenile; survive to that age 0.85*0.88*0.91*0.95*0.99 = 0.64]}

\subsection{State variables and scales}

\subsubsection{State variables}

Every individual in the simulation is characterised by state variables that are a) calculated new in each iteration, and b) modified from one iteration to the next:

\begin{itemize}
    \item Variables that are calculated new each iteration:
    \begin{itemize}
        \item Resources produced: Amount of resources produced by the individual. The amount is fixed to each stage. Therefore, the individual whether produce resources (stage-specific resource production) or not (0) based on a stage-specific production probability specified during initialisation.
        \item Resources received: Amount of resources received by the individual from other individual(s). The amount received by another individual is fixed to each stage. Therefore, the individual receives resources depending on the number of times the stage-specific probability is successful ($1$) or not ($0$), constrained by the stage-specific number of times receiving specified during initialisation.
        \item Resources gave: Amount of resources given by the individual to other individual(s). The amount given to another individual is fixed to each stage. Therefore, the individual gives resources depending on the number of times the stage-specific probability is successful ($1$) or not ($0$), constrained by the stage-specific number of times giving specified during initialisation.
        \item Resources available: Amount of resources an individual has after the dynamics of producing, consuming, giving, receiving, and storing resources. The resources available influence the probabilities for surviving, reproducing, and/or transitioning of an individual and decrease with the costs of each dynamic.
        \item Reproductive effort: Amount of resources the individual uses for reproduction, given the stage-specific probability. The amount is fixed to each stage. Therefore, the individual whether gives birth (stage-specific fertility probability)  or not (0) based on the stage-specific fertility probability and the amount of resources available.
    \end{itemize}
    \item Variables that are modified from one iteration to the next:
    \begin{itemize}
        \item Age: Amount of iterations the individual goes through from its birth until it dies. Age increases by one after each iteration, reflecting one year.
        \item Stage: Life cycle stage in which the individual is at the moment. There are five stages (infant, juvenile, adult, breeder, post-reproductive), each with its own stage-specific resource and life-history dynamics. Individual progression through the stages is determined by their age and resources available.
        \item Resources stored: Amount of resources the individual stores for later in time (i.e. next iteration). The amount of resources stored depends on the surplus resources after the stage-specific resource and life-history dynamics. Therefore, the individual whether stores the surplus (stage-specific storing) or loses it (0) based on the stage-specific storing probability. Additionally, stored resources may decay with time.
        \item Reproductive output: Amount of offspring produced, given the stage-specific fertility probability. Reproductive output increases by one after an iteration, if reproductive requirements (i.e. fertility probability and resources available) are met.
    \end{itemize}
\end{itemize}

\subsubsection{Auxiliary variables}

The individual dynamics are constrained by the following auxiliary variables. These variables are stage-specific, set at the initialisation and apply to all individuals in dependence on their state variables.

\begin{itemize}
    \item Die: Probability of dying in the stage. The probability is based on the mortality rates from \cite{gurven2007longevity}, which is adjusted according to the resources available for an individual.
    \item Produce: Probability of producing resources. The probability is based on a binomial distribution regarding whether the individual produces resources ($1$) or not ($0$). The values of the distribution are based on \cite{koster2020life}.
    \item Times receiving: Number of individuals from whom receiving resources. The values can go from zero to the maximum number of individuals available for giving in \cite{gurven2004give}.
    \item Receive: Probability of receiving resources from another individual. The probability is based on a binomial distribution regarding whether the individual receives resources ($1$) or not ($0$) . The values of the distribution are based on \cite{gurven2004give}. The sampling size is defined by the \emph{Times receiving}.
    \item Consume: Amount of resources necessary for somatic maintenance, based on \cite{kaplan2000theory}.
    \item Store: Probability of storing the surplus of resources at the end of an iteration. The probability is based on a binomial distribution regarding whether the individual stores resources ($1$) or not ($0$). The values of the distribution are based on *cross-cultural ref*.
    \item Times giving: Number of times giving resources from other individual(s). The values can go from zero to the maximum number of individuals available for receiving in \cite{gurven2004give}.
    \item Give: Probability of giving resources to another individual. The probability is based on a binomial distribution regarding whether the individual gives resources ($1$) or not ($0$) . The values of the distribution are based on \cite{gurven2004give}. The sampling size is defined by \emph{Times giving}.
    \item Reproduce: Probability of producing an offspring. The probability is based on a stage-specific fertility rate, which is adjusted according to the resources available for an individual.
    \item Transition: Probability of transitioning to the next stage. The transitions are specified as follow:
    \begin{itemize}
        \item Infant transition: Reaching the growth and development necessary to transition to the juvenile stage.
        \item Sexual maturity: Reaching the development necessary for menarche and transition to the adult stage.
        \item Reproduce (adult stage): Producing your first offspring and transition to the breeder stage.
        \item Menopause: Reaching the moment where you cannot, biologically, produce more offspring and transition to the post-reproductive stage.
    \end{itemize}
\end{itemize}

\subsubsection{Higher entity description}

Individuals represent females in a single-sex, haploid population. Individuals that are born until they reach \emph{age at transition trait} are considered infants. Juveniles are individuals that transition from infants, until they reach age of sexual maturity. Adults are individuals that have reached sexual maturity until they have their first offspring or reach menopause. Adults transition to a breeder stage once they have their first offspring, and remain in this stage until they reach menopause. From menopause onward individuals are considered post-reproductive.

\subsubsection{Scale}

Each iteration in the model represents one year. The probabilities  of producing, receiving, consuming, giving, and storing are binomial, with the values of happening ($1$) or not ($0$). The amount of resources an individual produces, receives, consumes, gives, and store are stage-specific. The number of times an individual receives and gives are also stage-specific . Reproductive effort is evaluated after the resource dynamics, followed by the evaluation for stage transition. Finally, the amount or resources available are stored and passed from one year to the next, being evaluated for survival at the beginning of the iteration.

\subsection{Process overview and scheduling}

Infant individuals go through survival, receiving, consuming, storing, and losing sub models each year until they transition to the next stage. Once in the juvenile stage, individuals go through survive, produce, receive, consume, give, store, and lose sub models for each year until they reach sexual maturity, transitioning to the adult stage. In the adult stage, individuals also go through surviving, producing, receiving, consuming, giving, storing and losing sub models until they have their first offspring or reach menopause. If an adult transition to a breeder, it goes through surviving, producing, receiving, consuming, giving, storing and losing sub models and also through a reproduction sub model until it reaches menopause. Once in a post-reproductive stage, the individual goes through the surviving, producing, receiving, consuming, giving, storing and losing sub models of the stage. In each year, the individual increase its age and updates they amount of resources it has. During each transition, the individual updates its stage variable and also transitions with the resources it has available form the earlier stage.

\section{Design concepts}

\subsection{Emergence}

 The life cycle of an individual emerge from its behaviour. The life cycle is represented by the timing of its reproductive allocative decision and its reproductive output, constrained by the stage-specific submodels related to resource acquisition and sharing. Population dynamics also emerge from the behaviour of the individuals. The population dynamics are represented as the age distributions of the life cycle transitions, reproductive output, and surviving individuals. The aims are to a) observe the ages of transition between stages and reproductive behaviour (i.e. reproductive output and timing) that emerge in scenarios with different resource productivity and sharing dynamics (fix resources produced, given, received, and stored) and b) calculate fitness differences ($\lambda$) associated with the different strategies that emerge in the different scenarios.
 
\subsection{Adaptation}

Not apply.

\subsection{Fitness}

Fitness is defined as population growth ($\lambda$).

\subsection{Prediction}

Not apply.

\subsection{Sensing}

Individuals are assumed to know their age, stage, and their current resources available  in order to apply the probabilities of producing, receiving, consuming, giving, losing resources, reproducing, surviving, and transitioning.

\subsection{Interaction}

Not apply.

\subsection{Stochasticity}

The life cycle and resource dynamics models are based on probability distributions. Therefore, reproductive allostatic decisions are stochastic.

\subsection{Collectives}

Not apply.

\subsection{Observation}

For model testing, the life cycle of the individuals was observed process by process. For model analysis, timing (e.g. longevity, age of transition), reproductive (e.g. number of offspring, timing of reproduction), and resource-related (e.g. production, consumption, giving, receiving, losing) variables were recorded.

\section{Details}

\subsection{Initialisation}

At initialisation, each individual in the population starts in the infant stage with the baseline resources to survive, resembling the amount of resources acquired during pregnancy. Hence, an individual would be guaranteed to survive the first survival submodel and go through the resource dynamics submodels, only ageing after surviving the survival submodel in the next iteration.

The auxiliary variables for each stage are set at initialisation. The values for each variable and stage are based on *X* population.

\subsection{Input}

The resource dynamics that individuals are subjected to during their life cycle are drawn from binomial distributions that are specific for the life cycle stage in which the individual is.

\subsection{Submodels}

Each individual goes through all the stage-specific submodels each iteration.

\subsubsection{Infant}

\begin{itemize}
    \item Die: The infant survives by sampling from a *specify distribution* a value equal or higher than the stage-specific survival rate, based on \cite{gurven2007longevity}. If the individual samples a value lower than the stage-specific survival rate, then it dies. The infant has a higher chance to survive if it has a larger amount of resources available. The amount of resources decreases by the costs of survival.
    \item Times receiving: The individual receives resources from a certain number of individuals. This is based on sampling a value between zero and the maximum number of givers in \cite{gurven2004give}, constrained by population size.
    \item Receive: The infant has a probability of receiving from another individual by sampling from a binomial distribution. The individual either receives resources ($1$) or not ($0$), based on the probability on \cite{gurven2004give}. The amount of resources received per giver is fixed, stage-specific, and based on the \cite{gurven2004give}. The sample size is defined by the value from the \emph{Times receiving} submodel. 
    \item Consume: The infant consumes the amount of resources necessary for somatic maintenance from the resources available in the iteration, based on \cite{kaplan2000theory}.
    \item Store: The infant has a probability of storing the surplus of resources available in the iteration by sampling from a binomial distribution. The individual either stores ($1$) or not ($0$), based on the probability on the *population reference*. In case the individual does not store ($0$) then the surplus is lost. Finally, stored resources decay with time.
    \item Transition: The infant transition by sampling from a *specify distribution* a value equal or higher than the stage-specific probability of transition, based on the *population reference*. The infant has a higher chance to transition if it has a larger amount of resources available. The amount of resources decreases by the costs of transition, while the remaining amount is stored, and transition to the juvenile stage.
\end{itemize}

\subsubsection{Juvenile}

\begin{itemize}
    \item Die: The juvenile survives by sampling from a *specify distribution* a value equal or higher than the stage-specific survival rate, based on \cite{gurven2007longevity}. If the individual samples a value lower than the stage-specific survival rate, then it dies. The juvenile has a higher chance to survive if it has a larger amount of resources available. The amount of resources decreases by the costs of survival.
    \item Produce: The juvenile has a probability of producing by sampling from a binomial distribution. The individual either produces resources ($1$) or not ($0$), based on the probability on \cite{koster2020life}. The amount of resources produced is fixed, stage-specific, and based on \cite{koster2020life}.
    \item Times receiving: The individual receives resources from a certain number of individuals. This is based on sampling a value between zero and the maximum number of givers in \cite{gurven2004give}, constrained by population size.
    \item Receive: The juvenile has a probability of receiving from another individual by sampling from a binomial distribution. The individual either receives resources ($1$) or not ($0$), based on the probability on \cite{gurven2004give}. The amount of resources received per giver is fixed, stage-specific, and based on the \cite{gurven2004give}. The sample size is defined by the value from the \emph{Times receiving} submodel. 
    \item Consume: The juvenile consumes the amount of resources necessary for somatic maintenance from the resources available in the iteration, based on \cite{kaplan2000theory}.
    \item Times giving: The individual gives resources from a certain number of individuals. This is based on sampling a value between zero and the maximum number of receivers in \cite{gurven2004give}, constrained by population size.
    \item Give: The juvenile has a probability of giving from another individual by sampling from a binomial distribution. The individual either gives resources ($1$) or not ($0$), based on the probability on \cite{gurven2004give}. The amount of resources gave per receiver is fixed, stage-specific, and based on the \cite{gurven2004give}. The sample size is defined by the value from the \emph{Times giving} submodel. 
    \item Store: The juvenile has a probability of storing the surplus of resources available in the iteration by sampling from a binomial distribution. The individual either stores ($1$) or not ($0$), based on the probability on the *population reference*. In case the individual does not store ($0$) then the surplus is lost. Finally, stored resources decay with time.
    \item Age at sexual maturity: The juvenile transition by sampling from a *specify distribution* a value equal or higher than the stage-specific probability of reaching sexual maturity, based on the *population reference*. The juvenile has a higher chance to be sexually mature if it has a larger amount of resources available. The amount of resources decreases by the costs of transition, while the remaining amount is stored, and transition to the adult stage.
\end{itemize}

\subsubsection{Adult}

\begin{itemize}
    \item Die: The adult survives by sampling from a *specify distribution* a value equal or higher than the stage-specific survival rate, based on \cite{gurven2007longevity}. If the individual samples a value lower than the stage-specific survival rate, then it dies. The adult has a higher chance to survive if it has a larger amount of resources available. The amount of resources decreases by the costs of survival.
    \item Produce: The adult has a probability of producing by sampling from a binomial distribution. The individual either produces resources ($1$) or not ($0$), based on the probability on \cite{koster2020life}. The amount of resources produced is fixed, stage-specific, and based on \cite{koster2020life}.
    \item Times receiving: The individual receives resources from a certain number of individuals. This is based on sampling a value between zero and the maximum number of givers in \cite{gurven2004give}, constrained by population size.
    \item Receive: The adult has a probability of receiving from another individual by sampling from a binomial distribution. The individual either receives resources ($1$) or not ($0$), based on the probability on \cite{gurven2004give}. The amount of resources received per giver is fixed, stage-specific, and based on the \cite{gurven2004give}. The sample size is defined by the value from the \emph{Times receiving} submodel. 
    \item Consume: The adult consumes the amount of resources necessary for somatic maintenance from the resources available in the iteration, based on \cite{kaplan2000theory}.
    \item Times giving: The individual gives resources from a certain number of individuals. This is based on sampling a value between zero and the maximum number of receivers in \cite{gurven2004give}, constrained by population size.
    \item Give: The adult has a probability of giving from another individual by sampling from a binomial distribution. The individual either gives resources ($1$) or not ($0$), based on the probability on \cite{gurven2004give}. The amount of resources gave per receiver is fixed, stage-specific, and based on the \cite{gurven2004give}. The sample size is defined by the value from the \emph{Times giving} submodel. 
    \item Store: The adult has a probability of storing the surplus of resources available in the iteration by sampling from a binomial distribution. The individual either stores ($1$) or not ($0$), based on the probability on the *population reference*. In case the individual does not store ($0$) then the surplus is lost. Finally, stored resources decay with time.
    \item Transition: The adult transition either to a reproductive stage (i.e. adult) or a post-reproductive stage depending on either the individual have a offspring or reaches menopause, respectively.
    \begin{itemize}
        \item Age at first reproduction: The adult transition by sampling from a Poisson distribution a value equal or higher than the stage-specific fertility rate, based on the *population reference*. The adult has a higher chance to have its first offspring if it has a larger amount of resources available. The amount of resources decreases by the costs of reproduction, while the remaining amount is stored, and transition to the breeding stage.
        \item Menopause: The adult transition by sampling from a *specify distribution* a value equal or higher than the stage-specific probability of menopause, based on the *population reference*. The adult has a lower chance to transition if it has a larger amount of resources available, where the chance increases every iteration. The amount of resources decreases by the costs of menopause, while the remaining amount is stored, and transition to the post-reproductive stage.
    \end{itemize}
\end{itemize}

\subsubsection{Breeder}

\begin{itemize}
    \item Die: The breeder survives by sampling from a *specify distribution* a value equal or higher than the stage-specific survival rate, based on \cite{gurven2007longevity}. If the individual samples a value lower than the stage-specific survival rate, then it dies. The breeder has a higher chance to survive if it has a larger amount of resources available. The amount of resources decreases by the costs of survival.
    \item Produce: The breeder has a probability of producing by sampling from a binomial distribution. The individual either produces resources ($1$) or not ($0$), based on the probability on \cite{koster2020life}. The amount of resources produced is fixed, stage-specific, and based on \cite{koster2020life}.
    \item Times receiving: The individual receives resources from a certain number of individuals. This is based on sampling a value between zero and the maximum number of givers in \cite{gurven2004give}, constrained by population size.
    \item Receive: The breeder has a probability of receiving from another individual by sampling from a binomial distribution. The individual either receives resources ($1$) or not ($0$), based on the probability on \cite{gurven2004give}. The amount of resources received per giver is fixed, stage-specific, and based on the \cite{gurven2004give}. The sample size is defined by the value from the \emph{Times receiving} submodel. 
    \item Consume: The breeder consumes the amount of resources necessary for somatic maintenance from the resources available in the iteration, based on \cite{kaplan2000theory}.
    \item Times giving: The individual gives resources from a certain number of individuals. This is based on sampling a value between zero and the maximum number of receivers in \cite{gurven2004give}, constrained by population size.
    \item Give: The breeder has a probability of giving from another individual by sampling from a binomial distribution. The individual either gives resources ($1$) or not ($0$), based on the probability on \cite{gurven2004give}. The amount of resources gave per receiver is fixed, stage-specific, and based on the \cite{gurven2004give}. The sample size is defined by the value from the \emph{Times giving} submodel. 
    \item Store: The breeder has a probability of storing the surplus of resources available in the iteration by sampling from a binomial distribution. The individual either stores ($1$) or not ($0$), based on the probability on the *population reference*. In case the individual does not store ($0$) then the surplus is lost. Finally, stored resources decay with time.
   \item Reproduce: The breeder produce an offspring by sampling from a Poisson distribution a value equal or higher than the stage-specific fertility rate, based on the *population reference*. If the individual samples a value equal or higher than the stage-specific fertility rate, then it produces one offspring. The breeder has a higher chance to have an offspring if it has a larger amount of resources available. The amount of resources decreases by the costs of reproduction, which diminishes after every reproduction.
    \item Menopause: The breeder transition by sampling from a *specify distribution* a value equal or higher than the stage-specific probability of menopause, based on the *population reference*. The breeder has a lower chance to transition if it has a larger amount of resources available, where the chance increases every iteration. The amount of resources decreases by the costs of menopause, while the remaining amount is stored, and transition to the post-reproductive stage.
\end{itemize}

\subsubsection{Post-reproductive}

\begin{itemize}
    \item Die: The post-reproductive survives by sampling from a *specify distribution* a value equal or higher than the stage-specific survival rate, based on \cite{gurven2007longevity}. If the individual samples a value lower than the stage-specific survival rate, then it dies. The post-reproductive has a higher chance to survive if it has a larger amount of resources available. The amount of resources decreases by the costs of survival.
    \item Produce: The post-reproductive has a probability of producing by sampling from a binomial distribution. The individual either produces resources ($1$) or not ($0$), based on the probability on \cite{koster2020life}. The amount of resources produced is fixed, stage-specific, and based on \cite{koster2020life}.
    \item Times receiving: The individual receives resources from a certain number of individuals. This is based on sampling a value between zero and the maximum number of givers in \cite{gurven2004give}, constrained by population size.
    \item Receive: The post-reproductive has a probability of receiving from another individual by sampling from a binomial distribution. The individual either receives resources ($1$) or not ($0$), based on the probability on \cite{gurven2004give}. The amount of resources received per giver is fixed, stage-specific, and based on the \cite{gurven2004give}. The sample size is defined by the value from the \emph{Times receiving} submodel. 
    \item Consume: The post-reproductive consumes the amount of resources necessary for somatic maintenance from the resources available in the iteration, based on \cite{kaplan2000theory}.
    \item Times giving: The individual gives resources from a certain number of individuals. This is based on sampling a value between zero and the maximum number of receivers in \cite{gurven2004give}, constrained by population size.
    \item Give: The post-reproductive has a probability of giving from another individual by sampling from a binomial distribution. The individual either gives resources ($1$) or not ($0$), based on the probability on \cite{gurven2004give}. The amount of resources gave per receiver is fixed, stage-specific, and based on the \cite{gurven2004give}. The sample size is defined by the value from the \emph{Times giving} submodel. 
    \item Store: The post-reproductive has a probability of storing the surplus of resources available in the iteration by sampling from a binomial distribution. The individual either stores ($1$) or not ($0$), based on the probability on the *population reference*. In case the individual does not store ($0$) then the surplus is lost. Finally, stored resources decay with time.
\end{itemize}

\bibliographystyle{apalike}
\bibliography{optimal_ref}

\end{document}
